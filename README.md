# 313_ShotSpotter
ShotSpotter analysis in Detroit


### Informational Guide For Boxplot, Scatterplot, and Histogram Applications

### Introduction

This is an informational guide that gives detail about operating our boxplot, scatterplot and histogram applications. Each application has its own folder. In each folder, there are a total of 4 files. 

One file will be a csv file with raw data. First, make sure that whatever csv file you want to use is in the application's folder, otherwise R Studio will not be able to read in the data.

Next, there is a file called ui (user interface). The purpose of the user interface is to create the layout for the application. This is where you can create the title for your application, a title for your graph or visual display, and input which variables you would like to be included on the x-axis and y-axis. For the scatterplot app, you can create a drop down menu where a user can change between which numerical variables to plot on the x-axis and y-axis to look at their relationship. For the boxplot app, you can create a drop down menu where a user can change between which numerical variable to plot on the y-axis against a fixed categorical variable on the x-axis, to look at each category's distribution. In the histogram app, you can create a sliding bar for a user to select the numbers of bins to use when looking at the distribution of a numerical variable. In the ui file, you will tell R Studio which type of plot you would like to use.

There is also a file called server. The server file is basically used to draw whichever type of plot you want to use. For the boxplot and scatterplot apps, you will use the ggplot() function to graph with your dataset. This will take the variables you input in the ui file and graph them. For the histogram app, the ggplot() function is unnecessary, and you can just use the hist() function to plot a frequency histogram. If you want your graph to display anything specific, you will want to do so in the server file.


There is a fourth file created to simplify the process, called ui_and_server. Basically, this file just condenses the ui file with the server file into one file for each app. In this file, you can easily see which part is the ui and which part is the server if you compare this file with the original ui file and the original server file. With this file you do not need to have both the ui file and the server file open separately to run the app. You can just simply open the ui_and_server file for each app to run it.


In R Studio, you will either want to have both the ui file and the server file open at the same time to run the application, or simply just the ui_and_server file open. If you choose to have both the ui file and the server file open separately, click 'Run App' in either file to run the the application. If you choose to use the ui_and_server file only, you can click 'Run App' in this file. 

After successfully running an application, you will visually see the application working in a web browser. After you are done with one application and want to use another, YOU MUST FIRST CLOSE R STUDIO and terminate all jobs, otherwise the first application that you ran will just keep running.

To get started, you will first want to use the install.packages() function in R Studio to install the 'shiny' and 'ggplot2' packages. To do this, type in install.packages('shiny') into your console in R Studio and hit enter. Then you will type in install.packages('ggplot2') into your console in R Studio and hit enter. Once these packages are installed, we can then take a look at how to interact with each application. 

### Boxplot App

The purpose of a boxplot is to compare a numerical variable against a categorical variable. Our boxplot app is designed to compare each time related numerical variable against each type of shot related category for 911 calls for service. 

As you can see, the first thing we want to do is load in our 'shiny' and 'ggplot2' libraries, and read in our csv file. We then use the na.omit() function to omit any observations in which the numerical variables have NA values. Also, since 'category' is a categorical variable, we must use the as.factor() function to factor it.

After our initial steps, we then take a look at the ui (user interface) file. To define the ui, we first use the fluidPage() function to create the page display for our application. Inside of this function, we create what we want the page of our application to display. Inside of the fluidpage() function, the first thing that we can do is use the titlepanel() function to create the title for the application. We then use the selectInput() function inside of the sidebarPanel() function, which is inside of the sidebarLayout() function (all of these functions are still inside of the fluidpage() function). This may sound a bit confusing, but basically what we are doing here is creating a drop down menu where a user can choose which variables they want to be plotted. We are only interested in the code inside of the selectInput() function. Inside of the selectInput() function is where you can choose which variables you would like to use. Since we are doing a boxplot, we will want the x-axis to be a categorical variable. In the example code, we use the 'choices =' command, and let the x-axis only be 'category'. However, for the y-axis, we use the 'choices =' command, and allow all time-related numerical variables to be plotted. We use the 'selected =' command to set a default variable to be plotted on both the x-axis and y-axis when the application initially opens. We then use the mainPanel() function to choose which type of plot we want to output. For this app, we want to output a boxplot. 

Lastly, we take a look at the server file. Basically in this file, we first create a function called 'server', which takes the variables used for input in the ui file, and then outputs the type of plot chosen in the ui file with the given data. Inside of the ggplot() function you will want to make sure that you first have the correct dataset loaded (in the example code we use data = dataset2). The aes_string() function inside of ggplot() will take the input for the x-axis and y-axis variables defined in the ui file. This portion of the code likely will not need to be changed. Then we use the geom_boxplot() function to create our boxplot. Inside of the scale_y_continuous() function we can do some scaling. Use the 'limits = ' command to choose what you want the range of the y-axis to be. In this example, limits = c(0,70) was used to scale the y-axis from 0 to 70 minutes. Use the breaks = seq() to choose how your plot is incremented. In this example, by using breaks = seq(0,100,5), we chose to scale the y-axis in increments of 5 minutes. 

When the boxplot app is ran successfully, the user should see the application in a web browser. The user should be able to see the title of the application, the title of the boxplot, a boxplot of a numerical variable against a categorical variable, and also a drop down menu on the left side of the page to change the variable on the y-axis (the x-axis variable is fixed for this application). 


### Scatterplot App

The purpose of a scatterplot is to compare two numerical variables. Our scatterplot app is designed to compare any two time-related numerical variables chosen for shot related 911 calls for service. 

Once again, we first want to load our 'shiny' and 'ggplot2' libraries, read in our csv file, and omit all of the observations that have NA values for each of the numerical variables. Here, we do NOT need to use the as.factor() function because we are not working with any categorical variables.

After these initial steps, we then look at the ui (user interface) file. We first use the fluidPage() function to create a page display for our application. Inside of the fluidPage() function, we use the titlePanel() function to create the title of the application. We then have the selectInput() function inside of the sidebarPanel() function, which is inside of the sidebarLayout() function (all of these functions are still inside of the fluidpage() function). Once again, it may sound confusing but basically all we are doing is creating a drop down menu where the user can select which time-related numerical to plot on the x-axis and y-axis. We are only interested in the code inside of the selectInput() function. Inside of the selectInput() function is where you can choose which variables you would like to use on the x-axis and y-axis. Since this is a scatterplot application, we will want both the x-axis and y-axis to be numerical variables. In the example code, we use the 'choices =' command, and allow the x-axis and y-axis to be any time-related numerical variable in our dataset. We use the 'selected =' command to set a default variable to be plotted on both the x-axis and y-axis when the application is initially opened. We then use the mainPanel() function to choose which type of plot we want to output. For this app, we want to output a scatterplot.

We then look at the server file. In this file, we first create a function called 'server', which takes the variables used for input in the ui file, and then outputs the type of plot chosen in the ui file with the given data. Inside of the ggplot() function you will want to make sure that you first have the correct dataset loaded (in the example code we use data = dataset1). The aes_string() function inside of ggplot() will take the input for the x-axis and y-axis variables defined in the ui file. This portion of the code likely will not need to be changed. Then we use the geom_point() function to create our scatterplot.

When the scatterplot application is ran successfully, the user should see the application in a web browser. The user should be able to see the title of the application, the title of the scatterplot, a scatterplot of a numerical variable against another numerical variable, and also a drop down menu on the left side of the page for the user to change the numerical variable plotted on the x-axis and y-axis. 

### Histogram App

With a frequency histogram, we can look at the distribution of a numerical variable and how it is skewed. Our histogram application is designed to look at the distribution of any particular time-related numerical variable for shot related 911 calls for service.

For this application, we will only load the 'shiny' library in R Studio, as 'ggplot2' will not be necessary. We then read in our csv file.

After these initial steps, we can then look at the ui (user interface) file. We first use the fluidPage() function to create a page display for our application. Inside of the fluidPage() function, we first use the titlePanel() function to create the title of the application. We then have the sliderInput() function inside of the sidebarPanel() function, which is inside of the sidebarLayout() function (all of these functions are still inside of the fluidpage() function). We are only interested in the code inside of the sliderInput() function. Inside of the sliderInput() function, you can set the minimum and maximum number of bins for a user to select from by using the 'min =' and 'max =' commands. The 'value =' command inside of the sliderInput() function is the default number of bins the application starts off with (in the example code it is set for 30 bins). We then use the mainPanel() function to choose which type of plot we want to output. For this app, we want to output a frequency histogram, so we use 'distPlot' as the outputId.  

We then look at the server file. In this application, we will define a variable labeled 'x' to be a numerical variable (in the example code we let x  represent totalresponsetime). After this, we want to omit any observations that have NA values for this numerical variable. We accomplish this by using the na.omit() function. We then create a variable called 'bins', which basically allows our histogram to plot however many bins the user chooses within the minimum and maximum number of bins defined in the ui file. Lastly, we use the hist() function to plot a frequency histogram. Inside of the hist() function you can use the 'xlim =' command to choose what you want to be the domain for the x-axis (in the example code we use xlim = c(0,100) to scale our x-axis from 0 to 100 minutes). We can also use the 'col =' command to choose which color we want our bins to be filled with, and the 'border =' command to choose which color we want our bins to be outlined with. We also can use the 'xlab =' command to label our x-axis, and the 'main =' command to label the title of our histogram. There is no need for labeling the y-axis since this is a frequency histogram, and the y-axis will simply just be the frequency. 

It is worth noting that the process for defining our ui and server for the frequency histogram app is a bit different than our scatterplot and boxplot apps. 

When the histogram application is ran successfully, the user should see the application in a web browser. The user should see the title of the application, the title of the frequency histogram, and a plot of the frequency histogram itself. The user should also see a sliding bar on the left hand side of the page, in which they can use to change the number of bins to use for the plot. The appropriate number of bins to choose to get a good look at the distribution will vary since each dataset will be different. 

